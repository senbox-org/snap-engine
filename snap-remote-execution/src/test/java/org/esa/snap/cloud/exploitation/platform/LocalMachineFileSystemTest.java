package org.esa.snap.cloud.exploitation.platform;

import org.esa.snap.remote.execution.file.system.ILocalMachineFileSystem;
import org.esa.snap.remote.execution.file.system.LinuxLocalMachineFileSystem;
import org.esa.snap.remote.execution.file.system.MacLocalMachineFileSystem;
import org.esa.snap.remote.execution.file.system.WindowsLocalMachineFileSystem;
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

/**
 * Created by jcoravu on 15/3/2019.
 */
public class LocalMachineFileSystemTest {

    public LocalMachineFileSystemTest() {
    }

    @Test
    public void testNormalizeFileSeparator() {
        // Windows
        ILocalMachineFileSystem localMachineFileSystem = new WindowsLocalMachineFileSystem();
        String result = localMachineFileSystem.normalizeFileSeparator("d:/kits/java\\jdk");
        assertNotNull(result);
        assertEquals("d:\\kits\\java\\jdk", result);

        // Macintosh
        localMachineFileSystem = new MacLocalMachineFileSystem();
        result = localMachineFileSystem.normalizeFileSeparator("\\home/guest\\kits");
        assertNotNull(result);
        assertEquals("/home/guest/kits", result);

        // Linux
        localMachineFileSystem = new LinuxLocalMachineFileSystem();
        result = localMachineFileSystem.normalizeFileSeparator("\\home/milan\\calcio");
        assertNotNull(result);
        assertEquals("/home/milan/calcio", result);
    }

    @Test
    public void testPathStartsWith() {
        // Windows
        ILocalMachineFileSystem localMachineFileSystem = new WindowsLocalMachineFileSystem();
        boolean result = localMachineFileSystem.pathStartsWith("d:\\Kits\\Java\\JDK", "D:\\kIT");
        assertEquals(true, result);

        // Macintosh
        localMachineFileSystem = new MacLocalMachineFileSystem();
        result = localMachineFileSystem.pathStartsWith("/home/guest/Desktop", "/Home/Guest");
        assertEquals(false, result);

        // Linux
        localMachineFileSystem = new LinuxLocalMachineFileSystem();
        result = localMachineFileSystem.pathStartsWith("/mnt/Data/files", "/mnt/Data/");
        assertEquals(true, result);
    }
}
